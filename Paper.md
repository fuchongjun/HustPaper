# 基于SOA架构的儿童在线音乐平台的设计与实现

## 1.绪论

### 1.1 课题来源
本论文课题来源是北京某互联网创业公司创业项目并结合华中科技大学导师团队集体指导最终确定了这个课题。

### 1.2 研究背景
#### 1.2.1 移动互联网方兴未艾
从计算机产生之初到现代大致上经历了几个大的发展阶段。第一阶段：互联网产生之前的时期。在这一阶段计算机主要用于科学计算和信息管理，计算机的使用者主要还是专家学者和研究人员。20世纪后期，随着互联网的产生和兴起，软件行业进入第二阶段：PC互联网时期。这一时期，国内外大量优秀的互联网产品涌现，www迅速风靡全球，门户网站、在线视频播放、网络游戏、社交应用、网络论坛、在线社区、电子商务等一大批PC互联网产品迅速发展并开始改变着人们的生活方式。近5年来，随着移动网络技术的发展和智能手机的普及，计算机世界已经悄然进入了第三阶段：移动互联网时期。这一时期，一大批移动应用涌现出来，许多软件开始实现跨平台运行。在互联网的基础上，移动互联网这几年的发展更是让人叹为观止，毫不夸张的说移动互联网已经和我们每一个人工作、学习、生活、娱乐密不可分。
#### 1.2.2 儿童音乐市场前景广阔
音乐基本是每个人娱乐生活中不可或缺的一部分，在互联网的背景下，从以前用唱片机和录音机来享受音乐，逐渐转变为上网听音乐，再到现在基本都在移动设备上享受音乐。可以说在线音乐市场规模是难以预估的，所以各大互联网公司都已经推出自己的在线音乐平台，例如腾讯的QQ音乐，百度的百度音乐，网易的网易云音乐等都已拥有了很大的用户量，而且还在不断的相互竞争，争夺更多的用户量。在这样的背景下儿童在线音乐这一块还有不小的空缺，儿童娱乐也在向多元化发展，家长和老师也越来越重视儿童娱乐方面的教育；另一方面儿童数量也随着计划生育的放开也将会有巨大的增长。由以上分析可以看出，现在各种网络音乐平台已经很完善，已经基本满足了大部分人们的需求，但是儿童群体还有很大市场空白。在此背景下，本系统专门为儿童群体提供在线儿童音乐服务的平台，以此来达到愉悦儿童，教育儿童的目的，与此同时也能够通过儿童之间的互动，丰富了儿童音乐的内容。
#### 1.2.3 儿童在线音乐平台的构建
鉴于以上原因，我们希望借助移动互联网构建新的儿童在线音乐平台。借助最先进的移动互联网技术，实现一个高可用性、跨平台、支持Web端、移动端（Android、iOS、Windows）的儿童在线音乐平台。

采用什么样的技术来实现这样一个服务于儿童的音乐平台呢？首先需要软件开发的历史。最初是面向过程的开发方法，使用此方法使得系统高度耦合，开发大型系统导致过程极其复杂，后期的维护更是灾难；接着出现了面向对象的方法，使得系统内部功能模块通过对类来实现封装和重用，通过接口来对外提供功能，这样一来增加模块之间是独立性，自然系统的耦合度就下降了，但这样模块的重用限定在了特定的编程语言上；随后为了解决面向对象开发方法模块在不同开发语言中的重用问题，出现了面向组件的开发方法，大家比较熟悉的比如Windows平台的COM组件，这样一来我们可以在不同系统中重用一些共用的模块，而不再限定语言，但这却不能够跨平台使用；最终，面向服务的体系结构（Service Oriented Architecture）的软件设计方法被提出来，这种新型的软件设计方法可以把服务作为组件，程序的功能模块有一个个服务组成，服务之间通过特定的接口和契约联系到一块，这样就能够实现在不同平台，不同语言之间相互调用服务接口来构建新的功能模块。通过以上技术背景的简单分析可以得出，为了构建儿童在线音乐平台，不能局限于Web端，还需要在移动设备上为儿童提供服务，所以本系统采用SOA的架构体系来为各个平台提供服务，这样一来系统的可维护行和扩展性大大提高。
### 1.3 研究意义
儿童是祖国的未来，是祖国的希望，是父母的掌中宝，我国儿童音乐市场还比较匮乏，通过儿童歌曲，不仅能促进儿童身心健康发展，也能通过一些儿童歌曲来影响和教育儿童，比如《我在马路捡到一分钱》就能传达给儿童拾金不昧的精神，《阿童木之歌》则能激发儿童内在的正义之感。本文详细分析了儿童在线音乐平台的业务需求，通过使用SOA架构技术向其他平台提供相关服务，实现跨平台的儿童在线音乐平台的搭建，让儿童不仅能够网页上享受音乐，也能够轻松愉快地在手机、平板、电视等设备上来随时随地的享受儿童音乐带来的乐趣，以此来，愉悦儿童，影响儿童，教育儿童，这也就是本系统的目的意义所在。
### 1.4 国内外研究现状
#### 1.4.1 SOA研究现状
Gartner在1996年首次提出了SOA的概念，他又在2002年再次提出了SOA是“现代应用开发领域的重要课题”，历经这么多年的演变和发展，“粗粒度，松耦合”、“面向服务的架构”等这些生僻的名词可能渐渐的淡出了我们的视野，但SOA的实现和应用越来越多，从以前抽象的概念走向了实践，也渐渐走向成熟。下面我们通过国内外的研究状况来谈谈SOA的发展。

从国际研究状况来看，这些年在SOA方面做出深入研究的基本包含了IT界所有的大公司，比如微软、IBM、Sun等；也有一些国际组织如：万维网联盟、结构化信息标准进步组织等。比如：IBM可谓在SOA相关产品的研发上投入了大量的人力和物力。目前来看，已经投入了超过几亿美元来建立SOA研发中心来统一公司的很多业务；比如IBM的企业服务总线就是SOA架构的；微软也毫不示弱在SOA方面也是不遗余力，首先推出了Indigo平台来让开发人员通过使用.NET技术来开发面向服务的应用程序，随后又推出了基于SOA的解决方案WCF框架，让开发者创建面向服务的应用程序组件服务开发变得简单。

从国内研究状况来看，中国基于SOA的应用在2008年后已经基本上走出了概念上的争论，从软件供应商到企业用户，已经推出了很多基于SOA架构的下一代软件产品。经过这么多年的历练，国内的SOA不论从理论、实践，还是到产品都得到了很大的发展。一方面，中国拥有了一大批掌握SOA精髓的系统集成商和独立软件提供商，如东软、华为、金蝶、用友等，他们或将SOA的理念植入到其解决方案中，或将SOA理念融合进其产品之中。另一方面，中国也拥有了自主研发的SOA中间件产品，如锐易特、东方通、金蝶的ESB都是市场上的佼佼者。随着国内对SOA的理解逐渐深入，越来越成熟和专业的SOA产品及解决方案都将会随之而来。在国内，SOA已经深入人心，现在几乎所有待建的系统和平台都要求基于SOA架构。SOA已经成为基本的架构原则，因为不论是为了以后系统间的整合，跨平台的建设，都会会不约而同地采用SOA原则来架构易于扩展且灵活的系统。

#### 1.4.2 儿童在线音乐发展现状

国际上来看，儿童在线娱乐的平台已经有不少，而且发展已经相对完善，比如(www.nick.com)主要提供了儿童喜欢的电视节目和儿童电影；小尼克网站(www.nickjr.com/)提供了大量儿童喜欢的音乐视频和一些小游戏；幼儿音乐网(www.babysongs.com/)提供了大量的幼儿音乐影片。当然，国外还有不少网站也都是与儿童在线音乐相关的，就不一一举例了。国内状况来看，儿童在线音乐方面还没有像流行音乐这么受大公司的重视，发展空间还有很大，很多方面还很不完善。当前市场上做的相对比较好的是贝瓦儿歌和六一儿童网，但它们也还有很多不完善的地方。这就是国内当前儿童音乐的概况，很明显，不太乐观。

### 1.5 论文研究内容

本文在探讨SOA架构技术基础上，结合现在流行互联网开发技术和软件工程思想，来构建包含Web端和移动端的儿童在线音乐平台。针对儿童在线音乐平台的开发实践，对系统使用的相关技术、设计原理、系统架构和具体实现方法进行了深入地研究和探讨。

论文的章节结构安排如下：

第一章为绪论部分，讨论课题研究的来源、背景、研究意义、国内外研究现状，在此基础上提出论文研究内容和章节结构安排。

第二章为关键技术分析，讨论与课题研究相关的关键技术，SOA体系结构、WCF框架、ORM与Entity Framework、新一代移动平台开发技术等。

第三章为需求分析部分，采用UML方法对儿童在线音乐平台进行需求分析、用例设计,最终展示为用例图、活动图等。

第四章为系统设计部分，采用UML方法对儿童在线音乐平台进行概要设计、详细设计，并给出了系统相关类图、时序图，最终根据系统设计方案进行数据库逻辑设计和物理设计。

第五章为系统实现部分，重点阐述了如何利用WCF技术实现跨平台服务化支持，如何实现多类型客户端接入，以及如何利用新一代移动平台开发技术开发现代的扁平化风格的移动应用。

第六章为系统测试部分，采用完善的测试用例对儿童在线音乐平台的功能、性能、可用性等多个方面进行了系统测试。

第七章为总结与展望部分，对本课题进行的研究进行系统总结与梳理，并对相关技术的发展以及儿童在线音乐平台的前景进行了展望。

## 2.关键技术分析
### 2.1 SOA架构
#### 2.1.1 SOA的定义
SOA（service-oriented architecture，面向服务架构）的概念最早是由Gartner提出的，由于当时的技术局限性还没有办法在应用中使用SOA这种架构思想，但是随着IT技术的迅猛发展，XML和Web Service 等技术逐渐走向成熟，SOA借助这些技术才逐渐从概念走向应用。但迄今为止，因为很多公司厂商、个人和专家对SOA理解不同，所以也没有一个统一的、业界广泛接受的定义，但一般认为：面向服务的架构是一个组件模型，它将应用程序的不同功能单元——服务（service），通过服务间定义良好的接口（interface）和契约（contract）联系起来。接口采用中立的方式定义，独立于具体实现服务的硬件平台、操作系统和编程语言，使得构建在这样的系统中的服务可以使用统一和标准的方式进行通信。

#### 2.1.2 SOA的本质
SOA从根本上讲可以理解为一种架构理念而不是某个具体的编程框架、技术。作为一种架构理念，SOA倡导面向接口编程而不是面向实现编程，通过一些统一数据通信标准，使系统之间的交互不再依赖具体的代码实现。系统与系统之间通过约定好的服务接口相互通信。使用SOA，使软件系统之间真正实现跨平台互操作，无论服务接口采用何种语言编写，对于调用方来说都是透明的，服务的使用者只需要关心服务接口所遵循的访问协议和数据结构，对于服务具体采用何种技术实现并不需要关心。因此，利用SOA，我们可以使用Java构建服务，在此基础上使用PHP调用Java提供的服务构建Web网站，使用Android调用同样的Java服务构建Android客户端，使用iOS调用Java服务构建iOS客户端，真正实现了一套接口，多种实现。因此，在移动互联网实现，SOA可谓是实现多终端跨平台的核心与关键。掌握了SOA，就能进入移动互联网大门。

#### 2.1.3 SOA开发过程
基于SOA的软件开发过程大致可分为以下几个过程：

1. 服务器端程序员与客户端程序员首先约定服务接口，包括参数类型，返回值类型，数据传输类型，输入输出参数等信息；
2. 服务器端程序员根据约定好的服务接口，面向服务开发服务接口，与此同时，客户端程序员同样面向服务接口开发相应的客户端程序。程序员只需要遵循之前约定好的接口开发即可，不存在强依赖关系。
3. 服务端与客户端开发完成之后，针对相应的服务接口进行联合调试，确保服务接口的可用性。调试通过以后，表明功能开发结束，服务接口可用。
4. 在使用过程中，如需维护某些功能，只需要维护相应的服务接口即可，客户端基本不需要进行额外的改动。

上述开发过程，充分证明了SOA架构的优势，服务端与客户端程序并行开发，互不干扰，面向接口开发而非面向实现开发，针对服务接口进行维护。这些特点都是面向对象设计原则的体现，具有高内聚、低耦合、开发效率高、维护成本低等特点。

#### 2.1.4 SOA特点剖析
从上述分析可以看出，SOA体系结构作为企业级分布式解决方案从其产生之初就备受关注。究其原因，我们发现SOA架构具有如下几大技术特点：

1. 标准化
SOA产生之前，在软件开发之前必须谨慎的进行技术选型，一旦技术确定以后，整个软件系统便与所采用的技术紧密结合。举例而言，一个采用Java技术开发的图书管理系统，内部各个模块之前必须全部遵从Java标准与规范进行开发和维护，模块与模块之间的通信也与采用的特定的Java组件有关，一旦系统需要与其他系统交互，必须开发其他系统对应的Java SDK、Java API接口等，不同系统之间广泛存在着非标准化的问题，一旦需要系统集成就必须进行单独开发与测试。这样就导致每集成一个系统就需要单独开发一种SDK，这种开发方式在系统规模比较小的时候开始可行的，但是一旦系统规模变的负责就很难行得通。这时候SOA的必要性就显现出来，使用SOA为系统之间提供标准化的服务接口，系统之间的互操作遵循统一的协议，不再需要单独开发的SDK，这种标准化的服务接口极大的减轻了开发成本，同时也减少了开发过程中异构系统的集成复杂度。标准化的服务接口带来了良好的互操作性，这可以说是SOA架构的精髓所在。
2. DRY
所谓DRY，就是Don't Repeat Yourself的缩写，它是现代软件工程的重要原则，“不要重复自己”其实就是软件复用的一种形象说法。在上世纪70年代，软件复用主要是程序级别的复用，最简单的方式就是C语言中的函数库，Pascal中的子程序，这些都是代码级软件复用。这些软件复用都与代码本身耦合，与系统采用的特定技术相关，是一种低级的微观层面的复用。上世纪90年代，组件化的软件复用技术开始兴起，微软的控件技术、COM组件技术都是这种技术的体现。这些技术虽然脱离了程序代码的局限性，但是仍然和特定的操作系统、技术平台绑定在一起。SOA技术提供了一种真正的软件复用解决方案，通过提供与特定技术平台无关的标准化服务接口，真正实现了跨平台、跨语言、跨解决方案的软件复用。正因为这个原因，才使SOA在近年来从众多的软件架构技术中脱颖而出，现在服务化已然成为了互联网界的热门话题。
3. 高内聚性和低耦合性
高内聚性和低耦合性是指一个软件模块只针对特定的需求提供完整的解决方案，软件的一个个模块与特定的软件需求形成一一对应的关系，软件模块与功能需求一一对应，当有新需求提出时，主要加入针对该需求的模块，而不需要改动原有的其它模块；当有需求发生变更时，只需要修改该软件需求对应的模块代码，而不需要改动其它代码。采用SOA架构，可以清楚地划分系统不同的功能，更好的实现系统模块的高内聚性和低耦合性。

#### 2.1.5 SOA技术实现

### 2.2 WCF框架
### 2.3 ORM与Entity Framework
### 2.4 新一代移动开发技术
